<footer class="sticky-footer bg-white">
  <div class="container my-auto">
    <div class="copyright text-center my-auto">
      <span>SuperviseMe - 2025</span>
    </div>
  </div>
</footer>
            <!-- End of Footer -->

        </div>
        <!-- End of Content Wrapper -->

    </div>
    <!-- End of Page Wrapper -->

    <!-- Scroll to Top Button-->
    <a class="scroll-to-top rounded" href="#page-top">
        <i class="fas fa-angle-up"></i>
    </a>

    <!-- Logout Modal-->
    {% include 'admin/components/logout_modal.html' %}

    <!-- Bootstrap core JavaScript-->
    <script src="{{ url_for('static', filename='assets/js/vendor/jquery/jquery.min.js') }}"></script>
    <script src="{{ url_for('static', filename='assets/js/vendor/bootstrap/js/bootstrap.bundle.min.js') }}"></script>

    <!-- Core plugin JavaScript-->
    <script src="{{ url_for('static', filename='assets/js/vendor/jquery-easing/jquery.easing.min.js') }}"></script>

    <!-- Custom scripts for all pages-->
    <script src="{{ url_for('static', filename='assets/js/sb-admin-2.min.js') }}"></script>

    <!-- Notifications system -->
    <script src="{{ url_for('static', filename='assets/js/notifications.js') }}"></script>

    <!-- Page level plugins -->
    <script src="{{ url_for('static', filename='assets/js/vendor/chart.js/Chart.min.js') }}"></script>
    
    <!-- DataTables -->
    <script src="{{ url_for('static', filename='assets/js/vendor/datatables/jquery.dataTables.min.js') }}"></script>
    <script src="{{ url_for('static', filename='assets/js/vendor/datatables/dataTables.bootstrap4.min.js') }}"></script>

    <!-- Page level custom scripts -->
    <script>
        (function () {
            const csrfMeta = document.querySelector('meta[name="csrf-token"]');
            if (!csrfMeta) return;
            const csrfToken = csrfMeta.getAttribute("content");

            const isMutatingMethod = (form) => {
                const method = (form.getAttribute("method") || "GET").toUpperCase();
                return ["POST", "PUT", "PATCH", "DELETE"].includes(method);
            };

            const ensureFormHasCsrf = (form) => {
                if (!form || !isMutatingMethod(form)) return;
                if (form.querySelector('input[name="csrf_token"]')) return;
                const tokenInput = document.createElement("input");
                tokenInput.type = "hidden";
                tokenInput.name = "csrf_token";
                tokenInput.value = csrfToken;
                form.appendChild(tokenInput);
            };

            // Ensure existing forms have CSRF immediately.
            document.querySelectorAll("form").forEach(ensureFormHasCsrf);

            // Ensure forms added later (e.g., markup below footer include or dynamically inserted modals) also get CSRF.
            const observer = new MutationObserver((mutations) => {
                mutations.forEach((mutation) => {
                    mutation.addedNodes.forEach((node) => {
                        if (!(node instanceof Element)) return;
                        if (node.matches && node.matches("form")) {
                            ensureFormHasCsrf(node);
                        }
                        if (node.querySelectorAll) {
                            node.querySelectorAll("form").forEach(ensureFormHasCsrf);
                        }
                    });
                });
            });
            observer.observe(document.documentElement, { childList: true, subtree: true });

            // Final safety net for forms submitted before observer catches up or created programmatically.
            document.addEventListener("submit", (event) => {
                ensureFormHasCsrf(event.target);
            }, true);

            // Add CSRF header to same-origin mutating fetch requests.
            const originalFetch = window.fetch;
            window.fetch = function (input, init) {
                const requestInit = init ? { ...init } : {};
                const method = ((requestInit.method || "GET") + "").toUpperCase();
                const shouldProtect = ["POST", "PUT", "PATCH", "DELETE"].includes(method);
                if (!shouldProtect) return originalFetch(input, requestInit);

                const requestUrl = typeof input === "string" ? input : (input && input.url) || "";
                const isAbsolute = /^https?:\/\//i.test(requestUrl);
                const isSameOrigin = !isAbsolute || requestUrl.startsWith(window.location.origin);

                if (isSameOrigin) {
                    const headers = new Headers(requestInit.headers || {});
                    if (!headers.has("X-CSRFToken")) {
                        headers.set("X-CSRFToken", csrfToken);
                    }
                    requestInit.headers = headers;
                }

                return originalFetch(input, requestInit);
            };
        })();

        $(document).ready(function() {
            $('#dataTable').DataTable();
            $('#dataTable1').DataTable();
        });
    </script>

</body>

</html>
